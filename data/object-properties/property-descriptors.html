<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Флаги и дескрипторы</h1>
    <h2>флаги свойств</h2>
    <p>у свойств объкта есть так же 3 других свойства(атрибута) или флага:</p>
    <ul>
        <li>writable – если true, свойство можно изменить, иначе оно только для чтения.</li>
        <li>enumerable – если true, свойство перечисляется в циклах, в противном случае циклы его игнорируют.</li>
        <li>configurable – если true, свойство можно удалить, а эти атрибуты можно изменять, иначе этого делать нельзя.</li>
    </ul>
    <p>let descriptor = Object.getOwnPropertyDescriptor(obj, propertyName) - получить полную информацию о свойстве</p>
    <p>alert( JSON.stringify(descriptor, null, 2 ) );</p>
    <p>Object.defineProperty(obj, propertyName, descriptor) - изменить флаг</p>
    <p>Object.defineProperty(user, "name", {
        writable: false
      });</p>

    <h2>некофигурируемое свойство - configurable</h2>
    <p>это дорога в один конец. поставив false больше ничего нельзя сделать со свойством. Нельзя изменить флаги и удалить. Но можно изменить значение свойства если writable: true</p>
      <p>если попытаться измеить выйдет ошибка(только в строгом режиме)</p>

      <h2>Object.Object.defineProperties и  Object.getOwnPropertyDescriptors</h2>
      <p>для работы с несколькими свойствами и флагами объекта</p>
      <p>Еще можно клонировать объект со всеми флагами, т.к. обычное копирование не учитывает флаги</p>

      <h2>глобальное запечатываение объекта</h2>
      <p>выше были примеры для работы с конкретным свойством, а эти работают с целым объектом</p>
      <ul>
        <li>Object.preventExtensions(obj) - запрещает добавлять новые свойства в объект</li>
        <li>Object.seal(obj) - Запрещает добавлять/удалять свойства. Устанавливает configurable: false для всех существующих свойств.</li>
        <li>Object.freeze(obj) - Запрещает добавлять/удалять/изменять свойства. Устанавливает configurable: false, writable: false для всех существующих свойств.</li>
      </ul>

      <h3>здесь методы для их проверки</h3>
      <ul>
        <li>Object.isExtensible(obj) - Возвращает false, если добавление свойств запрещено, иначе true.</li>
        <li>Object.isSealed(obj) - Возвращает true, если добавление/удаление свойств запрещено и для всех существующих свойств установлено configurable: false.</li>
        <li>Object.isFrozen(obj) - Возвращает true, если добавление/удаление/изменение свойств запрещено, и для всех текущих свойств установлено configurable: false, writable: false.</li>
      </ul>
</body>
</html>